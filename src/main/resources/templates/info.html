<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Информация о пользователе</title>

    <!-- Bootstrap 5 -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">

    <script src="https://telegram.org/js/telegram-web-app.js?57"></script>
</head>
<body>
<script>
    window.onload = function () {
        const params = new URLSearchParams(window.location.search);
        if (!params.has("initData")) {
            const tg = window.Telegram.WebApp;
            const initData = tg.initData;

            console.log(initData)
            window.location.href = "/?initData=" + encodeURIComponent(initData);
        }
    };

</script>

<div class="container mt-5">
    <div class="card shadow rounded p-4">
        <h1 class="display-6 mb-4 text-primary">Информация о пользователе</h1>

        <div th:if="${user != null}">
            <p class="mb-2"><strong>Имя:</strong> <span th:text="${user.first_name}"></span></p>
            <p class="mb-2"><strong>Фамилия:</strong> <span th:text="${user.last_name}"></span></p>
            <p class="mb-2"><strong>Никнейм:</strong> <span class="text-muted" th:text="${user.username}"></span></p>
            <p class="mb-2"><strong>Язык:</strong> <span th:text="${user.language_code}"></span></p>
        </div>

        <div th:if="${user == null}">
            <p class="text-danger">Пользователь не аутентифицирован.</p>
        </div>
    </div>
</div>

</body>
</html>